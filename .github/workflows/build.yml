- name: Build for Real Device (iPhone)
        run: |
          # Use -d to ensure we pick the directory, not files inside it
          WORKSPACE=$(ls -d ios/*.xcworkspace | head -1)
          # Get the basename (e.g., VideoApp) without the .xcworkspace extension
          SCHEME=$(basename "$WORKSPACE" .xcworkspace)
          
          echo "Building Workspace: $WORKSPACE with Scheme: $SCHEME"

          xcodebuild \
            -workspace "$WORKSPACE" \
            -scheme "$SCHEME" \
            -configuration Release \
            -sdk iphoneos \
            -derivedDataPath ios/build \
            CODE_SIGNING_ALLOWED=NO \
            CODE_SIGNING_REQUIRED=NO \
            CODE_SIGNING_IDENTITY="" \
            AD_HOC_CODE_SIGNING_ALLOWED=YES
